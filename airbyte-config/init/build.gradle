import com.bmuschko.gradle.docker.tasks.image.DockerBuildImage

plugins {
    id 'java'
    id 'com.bmuschko.docker-remote-api'
}

dependencies {
    implementation 'commons-cli:commons-cli:1.4'

    implementation project(':airbyte-config:models')
}

def buildTag = System.getenv('VERSION') ?: 'dev'
// Use task types
task buildMyAppImage(type: DockerBuildImage) {
    dependsOn compileTestJava
    dependsOn jar
    dependsOn processTestResources
    inputDir = file('.')
    images.add("airbyte/init:$buildTag")
}
build.dependsOn(buildMyAppImage)
